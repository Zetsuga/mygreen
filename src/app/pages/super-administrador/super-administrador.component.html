<div class="contenido">
    <div class="header">
        <app-header-panel></app-header-panel>
    </div>
    <div class="menu">
        <app-menu-panel></app-menu-panel>
    </div>

    <div class="admin-usuarios">

        <!--Formulario Usuarios  -->
        <form class="formulario" #usuariosForm="ngForm" (ngSubmit)="onSubmit(usuariosForm)"
            class="contenedor_datos_input">
            <div class="usuariosForm">
                <div class="titulo-usuariosForm">
                    <h2 class="tituloCard">CREAR ADMINISTRADOR</h2>
                </div>
                <span>NOMBRE</span>
                <div class="subForm">
                    <div class="class-input nombre">
                        <input type="text" id="nombre-usuariosForm" name="nombre" [(ngModel)]="usuario.nombre"
                            #nombre="ngModel"
                            [ngClass]="{'is-invalid': nombre.invalid && (nombre.dirty || nombre.touched)}" required
                            placeholder="  Nombre" />
                    </div>
                    <div class="advertencia" *ngIf="nombre.invalid && (nombre.dirty || nombre.touched)">
                        <p *ngIf="nombre.errors.required">El nombre es obligatorio</p>
                    </div>
                </div>

                <span>APELLIDOS</span>
                <div class="subForm">
                    <div class="class-input apellidos">
                        <input type="text" id="apellidos-usuariosForm" name="apellidos" [(ngModel)]="usuario.apellidos"
                            #apellidos="ngModel" [ngClass]="{'is-invalid':usuariosForm.submitted && apellidos.invalid}"
                            required placeholder="  Apellidos..." />
                    </div>
                    <div class="advertencia" *ngIf="apellidos.invalid && (apellidos.dirty || apellidos.touched)">
                        <p *ngIf="apellidos.errors.required">Los apellidos son obligatorios</p>
                    </div>
                </div>

                <span>TELÉFONO</span>
                <div class="subForm">
                    <div class="class-input telefono">
                        <input type="text" id="telefono-usuariosForm" name="telefono" [(ngModel)]="usuario.telefono"
                            #telefono="ngModel" [ngClass]="{'is-invalid': usuariosForm.submitted && telefono.invalid}"
                            required placeholder="  Teléfono..." />
                    </div>
                    <div class="advertencia" *ngIf="telefono.invalid && (telefono.dirty || telefono.touched)">
                        <p *ngIf="telefono.errors.required">El teléfono es obligatorio</p>
                    </div>
                </div>
                <span>DIRECCIÓN</span>
                <div class="subForm">
                    <div class="class-input telefono">
                        <input type="text" id="direccion-usuariosForm" name="direccion" [(ngModel)]="usuario.direccion"
                            #direccion="ngModel" [ngClass]="{'is-invalid': usuariosForm.submitted && direccion.invalid}"
                            required placeholder="  Direccion..." />
                    </div>
                    <div class="advertencia" *ngIf="direccion.invalid && (direccion.dirty || direccion.touched)">
                        <p *ngIf="direccion.errors.required">La dirección es obligatoria</p>
                    </div>
                </div>
                <span>CODIGO POSTAL</span>
                <div class="subForm">
                    <div class="class-input telefono">
                        <input type="text" id="direccion-usuariosForm" name="cp" [(ngModel)]="usuario.cp" #cp="ngModel"
                            [ngClass]="{'is-invalid': usuariosForm.submitted && cp.invalid}" required
                            placeholder="  Cp..." />
                    </div>
                    <div class="advertencia" *ngIf="cp.invalid && (cp.dirty || cp.touched)">
                        <p *ngIf="cp.errors.required">El cp es obligatorio</p>
                    </div>
                </div>
                <span>Población</span>
                <div class="subForm">
                    <div class="class-input telefono">
                        <input type="text" id="direccion-usuariosForm" name="poblacion" [(ngModel)]="usuario.poblacion"
                            #poblacion="ngModel" [ngClass]="{'is-invalid': usuariosForm.submitted && poblacion.invalid}"
                            required placeholder="  Población..." />
                    </div>
                    <div class="advertencia" *ngIf="poblacion.invalid && (poblacion.dirty || poblacion.touched)">
                        <p *ngIf="poblacion.errors.required">La población es obligatoria</p>
                    </div>
                </div>
                <span>Ciudad</span>
                <div class="subForm">
                    <div class="class-input telefono">
                        <input type="text" id="direccion-usuariosForm" name="ciudad" [(ngModel)]="usuario.ciudad"
                            #ciudad="ngModel" [ngClass]="{'is-invalid': usuariosForm.submitted && ciudad.invalid}"
                            required placeholder="  Ciudad..." />
                    </div>
                    <div class="advertencia" *ngIf="ciudad.invalid && (ciudad.dirty || ciudad.touched)">
                        <p *ngIf="ciudad.errors.required">La Ciudad es obligatoria</p>
                    </div>
                </div>
                <!-- <span>ROL</span>
                <div class="subForm">
                    <div class="class-input telefono">
                        <input type="text" id="rol-usuariosForm" name="rol" [(ngModel)]="usuario.rol" #rol="ngModel"
                            [ngClass]="{'is-invalid': usuariosForm.submitted && rol.invalid}" required
                            placeholder="  Rol..." />
                    </div>
                    <div class="advertencia" *ngIf="rol.invalid && (rol.dirty || rol.touched)">
                        <p *ngIf="rol.errors.required">El Rol es obligatorio</p>
                    </div>
                </div> -->

                <span>E-MAIL</span>
                <div class="subForm">
                    <div class="class-input email">
                        <input type="email" id="email-usuariosForm" name="correo" [(ngModel)]="usuario.email"
                            #correo="ngModel"
                            [ngClass]="{'is-invalid':correo.invalid && (correo.dirty || correo.touched)}" email required
                            placeholder="  E-mail..." />
                    </div>
                    <div *ngIf="correo.invalid && (correo.dirty || correo.touched)">
                        <p *ngIf="correo.errors.required" class="advertencia">El correo es obligatorio</p>
                    </div>
                </div>

                <span>NUEVA CONTRASEÑA</span>
                <div class="subForm">
                    <div class="class-input">
                        <input type="password" name="password" [(ngModel)]="usuario.contrasenia" #password="ngModel"
                            [ngClass]="{'is-invalid':password.invalid && (password.dirty || password.touched)}"
                            minlength="4" required placeholder="  *******" />
                    </div>
                    <div class="advertencia" *ngIf="password.invalid && (password.dirty || password.touched)">
                        <p *ngIf="password.errors.required">La contraseña es obligatoria</p>
                        <p *ngIf="password.errors.minlength">Minimo 4 caracteres</p>
                    </div>
                </div>

                <span>REPETIR CONTRASEÑA</span>
                <div class="subForm">
                    <div class="class-input">
                        <input type="password" name="ConfirmPassword" ngValidateEqual="password"
                            #ConfirmPassword="ngModel" [(ngModel)]="usuario.confirmPassword"
                            [ngClass]="{'is-invalid':ConfirmPassword.invalid && (ConfirmPassword.dirty || ConfirmPassword.touched)}"
                            minlength="4" required placeholder="  *******" />
                    </div>
                    <div class="advertencia"
                        *ngIf="  ConfirmPassword.invalid && (ConfirmPassword.dirty || ConfirmPassword.touched)">
                        <p *ngIf="ConfirmPassword.errors.required">La contraseña es obligatoria</p>
                        <p *ngIf="ConfirmPassword.errors.minlength">Minimo 4 caracteres</p>
                        <p *ngIf="ConfirmPassword.hasError('notEqual') && password.valid">Contraseñas no coinciden</p>
                    </div>
                </div>


                <div id="boton-form">
                    <button *ngIf="botonFormulario" class="botonMyGreen" id="crear-modificar" type="submit"
                        [disable]="usuariosForm">CREAR</button>
                    <button *ngIf="!botonFormulario" class="botonMyGreen btnModificar" id="crear-modificar"
                        type="button" (click)="modificarUsuario()">MODIFICAR</button>
                </div>
            </div>
        </form>

        <!-- Tabla Usuarios Super Admin -->

        <div class="tablaUltimasTareas">

            <!-- Tabla usuarios administradores -->
            <div class="titulo-usuariosForm">
                <h2 class="tituloCard">USUARIOS ADMINISTRADORES</h2>
            </div>
            <table class="table table-striped table-hover" id="tablaMygreen" #tablaMygreen>
                <thead>
                    <th scope="col" id="tablaCabecera">
                        NOMBRE
                    </th>
                    <th scope="col" id="tablaCabecera">
                        APELLIDOS
                    </th>
                    <th scope="col" id="tablaCabecera">
                        TELÉFONO
                    </th>
                    <th scope="col" id="tablaCabecera">
                        E-MAIL
                    </th>
                    <th scope="col" id="tablaCabecera">

                    </th>
                </thead>
                <tbody>
                    <tr *ngFor="let user of administradores; let indice=index" id="tablaFila">
                        <td>{{user.nombre}}</td>
                        <td>{{user.apellidos}}</td>
                        <td>{{user.telefono}}</td>
                        <td>{{user.email}}</td>
                        <td>
                            <div class=iconos><a (click)="openPopup(indice)"><img
                                        src="../../../assets/img/iconoEliminar.png"></a><a
                                    (click)="cargarDatos2(indice)"><img
                                        src="../../../assets/img/iconoModificar.png"></a>
                            </div>
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>




    </div>

    <div class="modal" tabindex="-1" role="dialog" [ngStyle]="{'display':displayStyle}">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Seguro que desea eliminar el usuario</h4>
                </div>
                <div class="modal-body">
                    <p>Se eliminará de forma permanente en la base de datos.</p>

                </div>
                <div class="modal-footer">
                    <button type="button" class="botonMyGreen2" (click)="closePopup()">
                        Cerrar
                    </button>
                    <button type="button" class="botonMyGreen2" (click)="eliminarUsuario2()">
                        Eliminar
                    </button>
                </div>
            </div>
        </div>
    </div>


</div>